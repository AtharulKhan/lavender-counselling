document.addEventListener("DOMContentLoaded",()=>{nxtajaxPagi(document)});function nxtajaxPagi(a){const b=a.querySelector(".tpgb-pagination");if(b){const c=b.getAttribute("data-pagi-opt");if("ajax_based"===c){function c(a){("grid"===o.layout||"masonry"===o.layout||"metro"===o.layout)&&(j=new Isotope(a,{itemSelector:".grid-item",resizable:!0,sortBy:"original-order",layoutMode:"masonry"===o.layout?"masonry":"fitRows",transitionDuration:"0.4s",stagger:30,hiddenStyle:{opacity:0,transform:"scale(0.8)"},visibleStyle:{opacity:1,transform:"scale(1)"}}),imagesLoaded(a,function(){j.layout()}))}function d(a,b,c=1){let d=[1];for(let e=a-c;e<=a+c;e++)1<e&&e<b&&d.push(e);return 1<b&&d.push(b),d=[...new Set(d)].sort((c,a)=>c-a),d}function e(a,c){const e=d(a,c,1);let f="";1<a&&(f+=`<a href="#" class="prev page-numbers">PREV</a>`);let g=0;e.forEach(b=>{1<b-g&&(f+="<span class=\"dots\">...</span>"),f+=b===a?`<span class="current" data-page="${b}">${b}</span>`:`<a href="#" data-page="${b}" class="inactive">${b}</a>`,g=b}),b.innerHTML=f}function f(){k="*",a.querySelectorAll(".tpgb-category-list.active").forEach(function(a){a.classList.remove("active")});const b=a.querySelector(".tpgb-category-list[data-filter=\"*\"]");b&&b.classList.add("active")}function g(d,g="*"){const k=a.createElement("div");k.style.display="none",q.parentNode.appendChild(k);const l=new URLSearchParams({action:"tpgb_post_load",pages:d.toString(),dyOpt:m,option:n,filter:g});fetch(tpgb_config.ajax_url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:l}).then(a=>a.text()).then(a=>{if(a&&0<a.trim().length)if("grid"===o.layout||"masonry"===o.layout||"metro"===o.layout){k.innerHTML=a;const g=q.querySelectorAll(".grid-item");g.forEach((a,b)=>{setTimeout(()=>{j&&j.remove(a)},50*b)}),setTimeout(()=>{q.innerHTML="";const a=k.querySelectorAll(".grid-item");a.forEach(a=>{q.appendChild(a)}),k.remove(),f(),c(q),h(p),i(p,o);const g=parseInt(b.getAttribute("data-total-page")||"1");e(d,g)},50*g.length+100)}else{q.innerHTML=a,f();const c=parseInt(b.getAttribute("data-total-page")||"1");e(d,c)}}).catch(a=>{console.error("Error in fetch:",a)})}function h(a){0<a.querySelectorAll(".tpgb-category-filter").length&&a.querySelectorAll(".tpgb-filter-data .tpgb-categories > .tpgb-filter-list > a").forEach(function(b){const c=b.dataset.filter;let d=0;c!==void 0&&""!==c&&("*"===c?d=a.querySelectorAll(".post-loop-inner .grid-item").length:d=a.querySelectorAll(".post-loop-inner .grid-item"+c).length);const e=b.querySelector(".tpgb-category-count");0<d&&e&&(e.innerHTML=d)})}function i(b){b.classList.contains("tpgb-metro")&&"function"==typeof tppoMetro&&tppoMetro(a),"function"==typeof tppostList&&tppostList(a),b.classList.contains("tpgb-equal-height")&&"function"==typeof equalHeightFun&&(equalHeightFun(b),setTimeout(function(){j.layout()},100)),0<b.querySelectorAll(".tpgb-messagebox").length&&"function"==typeof tpmsgBox&&tpmsgBox(b),0<b.querySelectorAll(".tpgb-fancy-popup").length&&b.querySelectorAll(".tpgb-fancy-popup").forEach(a=>{"function"==typeof tpgb_fancy_popup&&tpgb_fancy_popup(a)}),0<b.querySelectorAll(".tpgb-accordion").length&&"function"==typeof accordionJS&&accordionJS(b),0<b.querySelectorAll(".tpgb-heading-animation").length&&"function"==typeof tpheAnim&&tpheAnim(b)}let j,k="*",l=1;const m=b.getAttribute("data-dyopt"),n=b.getAttribute("data-post-option"),o=JSON.parse(b.getAttribute("data-dyopt")||"{}"),p=a.getElementById(o.load_class),q=p.querySelector(".post-loop-inner");c(q),function(){const b=a.querySelectorAll(".tpgb-category-list");b.forEach(function(b){b.addEventListener("click",function(b){b.preventDefault();const c=this.getAttribute("data-filter");k=c,a.querySelectorAll(".tpgb-category-list.active").forEach(function(a){a.classList.remove("active")}),this.classList.add("active"),j&&(j.arrange({filter:c,transitionDuration:"0.4s"}),setTimeout(()=>{j.layout()},50))})});const c=a.querySelector(".tpgb-category-list.active");if(c)k=c.getAttribute("data-filter")||"*";else{const b=a.querySelector(".tpgb-category-list[data-filter=\"*\"]");b&&(b.classList.add("active"),k="*")}}();const r=parseInt(b.getAttribute("data-total-page")||"1");l=parseInt(b.querySelector("span.current")?.getAttribute("data-page")||"1"),e(l,r),b.addEventListener("click",a=>{const c=a.target.closest("a[data-page], a.prev.page-numbers, a.next.page-numbers");if(c){a.preventDefault();const d=parseInt(b.getAttribute("data-total-page")||"1");l=c.classList.contains("prev")?Math.max(1,l-1):c.classList.contains("next")?Math.min(d,l+1):parseInt(c.getAttribute("data-page")),g(l,k)}})}}}