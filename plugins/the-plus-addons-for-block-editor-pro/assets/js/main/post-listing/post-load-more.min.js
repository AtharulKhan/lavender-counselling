document.addEventListener("DOMContentLoaded",function(){tppoLoad(document)});function tppoLoad(a){var b=a.querySelectorAll(".post-load-more");b.length&&(a.querySelector(".tpgb-isotope")||a.querySelector(".tpgb-metro"))&&b.forEach(function(b){b.addEventListener("click",function(b){b.preventDefault();var c=this,d=JSON.parse(c.dataset.dypost),e=c.dataset.postOption,f=c.textContent;if(c.textContent=d.loadingtxt,(void 0===d.offset_posts||""===d.offset_posts)&&(d.offset_posts=0),d.total_page>=d.page){d.offset=parseInt(d.page-1)*parseInt(d.load_more)+parseInt(d.display_post)+parseInt(d.offset_posts);var g=new XMLHttpRequest;g.open("POST",tpgb_config&&tpgb_config.ajax_url?tpgb_config.ajax_url:tpgb_load.ajaxUrl,!0),g.setRequestHeader("Content-Type","application/x-www-form-urlencoded;"),g.onload=function(){if(200===g.status&&400>g.status){var b=g.responseText;if(c.textContent=f,""===b)c.classList.add("hide");else{var e=document.getElementById(d.load_class),h=e.querySelector(".post-loop-inner");if(("grid"===d.layout||"masonry"===d.layout)&&e.classList.contains("tpgb-isotope")){var i=new Isotope(h,{itemSelector:".grid-item",resizable:!0,sortBy:"original-order",layoutMode:"masonry"==d.layout?"masonry":"fitRows",transitionDuration:d.disableAnim?0:"0.4s"}),j=document.createElement("div");j.innerHTML=b,i.insert(j.querySelectorAll(".grid-item")),i.layout(),i.reloadItems()}if(e.classList.contains("tpgb-metro")&&(h.insertAdjacentHTML("beforeend",b),"function"==typeof tppoMetro&&tppoMetro(a)),"function"==typeof tppostList&&tppostList(a),0<e.querySelectorAll(".tpgb-category-filter").length&&(e.querySelectorAll(" .tpgb-filter-data .tpgb-categories > .tpgb-filter-list > a").forEach(function(a){var b=a.dataset.filter,c=0;void 0!==b&&""!==b&&("*"===b?c=e.querySelectorAll(".post-loop-inner .grid-item").length:c=e.querySelectorAll(" .post-loop-inner .grid-item"+b).length),0<c&&null!=a.querySelector(".tpgb-category-count")&&(a.querySelector(".tpgb-category-count").innerHTML=c)}),"function"==typeof tpFilter&&tpFilter(e)),e.classList.contains("tpgb-equal-height")&&"function"==typeof equalHeightFun&&(equalHeightFun(e),setTimeout(function(){i.layout()},100)),0<e.querySelectorAll(".tpgb-messagebox").length&&"function"==typeof tpmsgBox&&tpmsgBox(e),0<e.querySelectorAll(".tpgb-fancy-popup").length){let a=e.querySelectorAll(".tpgb-fancy-popup");a.forEach(function(a){tpgb_fancy_popup(a)})}0<e.querySelectorAll(".tpgb-accordion").length&&"function"==typeof accordionJS&&accordionJS(e),0<e.querySelectorAll(".tpgb-heading-animation").length&&"function"==typeof tpheAnim&&tpheAnim(e)}d.page++,d.page===d.total_page?(c.classList.add("hide"),d.page=d.page,c.parentNode.insertAdjacentHTML("beforeend","<div class=\"tpgb-post-loaded\">"+d.loaded_posts+"</div>")):(d.page=d.page,c.setAttribute("data-page",d.page));var k=JSON.stringify(d);c.dataset.dypost=k}},g.send("action=tpgb_post_load&option="+encodeURIComponent(e)+"&dyOpt="+encodeURIComponent(JSON.stringify(d)))}else c.classList.add("hide")})})}